<form [formGroup]="myForm" (ngSubmit)="onSubmit()">
  <mat-accordion>
    <!-- Personal/Entity Details -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Personal/Entity Details
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div class="form-row">
        <div class="form-group">
          <mat-form-field appearance="fill">
            <mat-label>Name</mat-label>
            <input matInput type="text" formControlName="name">
          </mat-form-field>
        </div>
        <div class="form-group">
          <mat-form-field appearance="fill">
            <mat-label>Company Name</mat-label>
            <input matInput type="text" formControlName="companyName">
          </mat-form-field>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <mat-form-field appearance="fill">
            <mat-label>Mobile No</mat-label>
            <input matInput type="text" formControlName="mobileNo">
          </mat-form-field>
        </div>
        <div class="form-group">
          <mat-form-field appearance="fill">
            <mat-label>Telephone No</mat-label>
            <input matInput type="text" formControlName="telephoneNo">
          </mat-form-field>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <mat-form-field appearance="fill">
            <mat-label>WhatsApp No</mat-label>
            <input matInput type="text" formControlName="whatsappNo">
          </mat-form-field>
        </div>
        <div class="form-group">
          <mat-form-field appearance="fill">
            <mat-label>Email</mat-label>
            <input matInput type="email" formControlName="email">
          </mat-form-field>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <mat-form-field appearance="fill">
            <mat-label>Remark</mat-label>
            <textarea matInput formControlName="remark"></textarea>
          </mat-form-field>
        </div>
        <div class="form-group">
          <mat-form-field appearance="fill">
            <mat-label>Date of Birth</mat-label>
            <input matInput type="date" formControlName="dateOfBirth">
          </mat-form-field>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <mat-form-field appearance="fill">
            <mat-label>Anniversary Date</mat-label>
            <input matInput type="date" formControlName="anniversaryDate">
          </mat-form-field>
        </div>
        <div class="form-group">
          <mat-form-field appearance="fill">
            <mat-label>GSTIN</mat-label>
            <input matInput type="text" formControlName="gstin">
          </mat-form-field>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <mat-form-field appearance="fill">
            <mat-label>PAN No</mat-label>
            <input matInput type="text" formControlName="panNo">
          </mat-form-field>
        </div>
        <div class="form-group">
          <mat-checkbox formControlName="applyTds">Apply TDS</mat-checkbox>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <mat-form-field appearance="fill">
            <mat-label>Credit Limit</mat-label>
            <input matInput type="number" formControlName="creditLimit">
          </mat-form-field>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- Bank Details -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Bank Details
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div formArrayName="bank_id">
        <div *ngFor="let bank of bankForms.controls; let i=index" [formGroupName]="i" class="bank-group">
          <div class="form-group">
            <mat-form-field appearance="fill">
              <mat-label>Bank IFSC Code</mat-label>
              <input matInput type="text" formControlName="bank_ifsc_code">
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field appearance="fill">
              <mat-label>Bank Name</mat-label>
              <input matInput type="text" formControlName="bank_name">
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field appearance="fill">
              <mat-label>Branch Name</mat-label>
              <input matInput type="text" formControlName="branch_name">
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field appearance="fill">
              <mat-label>Account No</mat-label>
              <input matInput type="text" formControlName="account_no">
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field appearance="fill">
              <mat-label>Account Holder Name</mat-label>
              <input matInput type="text" formControlName="account_holder_name">
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-checkbox formControlName="is_active">Is Active</mat-checkbox>
          </div>
        </div>
      </div>
      <button mat-button type="button" (click)="addBank()">Add Bank</button>
    </mat-expansion-panel>

    <!-- Address Details -->
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          Address Details
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div formArrayName="address">
        <div *ngFor="let address of addressForms.controls; let i=index" [formGroupName]="i" class="address-group">
          <div class="form-group">
            <mat-form-field appearance="fill">
              <mat-label>Address Line 1</mat-label>
              <input matInput type="text" formControlName="address_line_1">
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field appearance="fill">
              <mat-label>Address Line 2</mat-label>
              <input matInput type="text" formControlName="address_line_2">
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field appearance="fill">
              <mat-label>Country</mat-label>
              <input matInput type="text" formControlName="country">
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field appearance="fill">
              <mat-label>State</mat-label>
              <input matInput type="text" formControlName="state">
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field appearance="fill">
              <mat-label>City</mat-label>
              <input matInput type="text" formControlName="city">
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-form-field appearance="fill">
              <mat-label>Pincode</mat-label>
              <input matInput type="text" formControlName="pincode">
            </mat-form-field>
          </div>
          <div class="form-group">
            <mat-checkbox formControlName="is_active">Is Active</mat-checkbox>
          </div>
        </div>
      </div>
      <button mat-button type="button" (click)="addAddress()">Add Address</button>
    </mat-expansion-panel>
    <!-- Submit Button -->
    <div class="form-row">
      <button mat-raised-button color="primary" type="submit">Submit</button>
    </div>
  </mat-accordion>
</form>
